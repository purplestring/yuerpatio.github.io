<!DOCTYPE html>
<html>
<head> 
	<meta charset="utf-8"> 
	<title>miao~</title> 
	<style type="text/css"> 
	#divbox{margin:0 auto;border:1px solid #fff;width:960px;background:rgba(5,44,7,0.7); color:#FFF}
		a {
		color:#00ff00;
		text-decoration: none;
	} /* 已或未访问链接颜色 */
		
	a:hover {
		color:#FFF;	
		text-decoration: none;
	} /* 悬停时链接颜色 */
	</style>
</head>
<body background='b.jpg'>
	<img id="scream" src="ding.jpg" style="display:none">
	<img id="biyan" src="dingby.jpg"  style="display:none">
	<img id="zyan" src="dingzy.jpg"  style="display:none">
	<img id="miao" src="miao.jpg"  style="display:none">
	<div id="divbox">
	
	<a href="http://yuerpatio.com/">『返回主页』</a>
		</br></br></br>	
		
		<div align="center">
			<p><font color="white" size="24" >丁丁的小鱼干</font></p>
			<canvas id="myCanvas" width="800" height="592" style="border:1px solid #d3d3d3;"></canvas>
			<p id="message" style="display:none"></p>
			<p id="info"></p>
			<p id="state" style="display:none">0</p>
		</div>
	</div>
	</br></br>
	<div id='foot' align="center"><font color=white style="background:#86ab82">Copyright © 2017 紫月. All Rights Reserved.</font></br></br></br></br></div>
</body>
<script>

		
var canvas=document.getElementById("myCanvas");
var context=canvas.getContext("2d");
var img=document.getElementById("scream");

img.onload = function() {
	context.drawImage(img,0,0);
	document.getElementById("info").innerHTML="本喵耳朵，要先摸~<br><br><br><br><br>";
	
} 

function getLocation(x, y) {
	var bbox = canvas.getBoundingClientRect();
	return {
		x: (x - bbox.left) * (canvas.width / bbox.width),
		y: (y - bbox.top) * (canvas.height / bbox.height)
		
		/*
		 * 此处不用下面两行是为了防止使用CSS和JS改变了canvas的高宽之后是表面积拉大而实际
		 * 显示像素不变而造成的坐标获取不准的情况
		x: (x - bbox.left),
		y: (y - bbox.top)
		*/
	};
}
function drawHorizontalLine(y) {
	context.beginPath();
	context.moveTo(0, y);
	context.lineTo(canvas.width, y);
	context.stroke();
	context.closePath();
}
function drawVerticalLine(x) {
	context.beginPath();
	context.moveTo(x, 0);
	context.lineTo(x, canvas.height);
	context.stroke();
	context.closePath();
}

canvas.ontouchstart = function (e) {
var touchs = e.changedTouches[0];
//alert(touchs);
//alert(touchs.pageX);
miao(getLocation(touchs.pageX, touchs.pageY));
}

canvas.onmousemove = function (e) {
miao(getLocation(e.clientX, e.clientY));
}

function miao(location) {
//alert("25");
	//var location = getLocation(e.clientX, e.clientY);
	var message = document.getElementById("message");
	message.innerHTML = "x=" + location.x + " ,y=" + location.y;
	/*if(document.getElementById("state").innerHTML==0)
	{
		if(location.x>615 && location.x<623 && location.y>261 && location.y<271)
		{
			document.getElementById("info").innerHTML="眼睛";
			context.drawImage(document.getElementById("biyan"),549,167);
		}
		else
		{
			document.getElementById("info").innerHTML="";
			context.drawImage(document.getElementById("zyan"),549,167);
		}
	}*/
	//左耳
	del=15;
	if(location.x>(537-del) && location.x<(537+del) && location.y>(110-del) && location.y<(110+del))
	{
		if(document.getElementById("state").innerHTML==0)
		{
			 document.getElementById("state").innerHTML=1; 
			 context.drawImage(document.getElementById("biyan"),549,167);
			 document.getElementById("info").innerHTML="好，本喵的小鱼干不见了，可愿帮忙？<br><br>愿意：方冰块；<br>不愿意：。。。<br><br>";
			 return;
		}
		if(document.getElementById("state").innerHTML==2)
		{
			 window.location.href="http://weibo.com/1759006061/C97SPELdy"; 
		}
		if(document.getElementById("state").innerHTML==3)
		{
			 document.getElementById("state").innerHTML=4; 
			 context.drawImage(document.getElementById("zyan"),549,167);
			 document.getElementById("info").innerHTML="是否见到小鱼干？<br><br>木有：鱼眼<br>木有看清：方冰块<br><br>";
			 return;
		}
		if(document.getElementById("state").innerHTML==5)
		{
			alert("喵呜~~~");
			window.location.href="http://weibo.com/1759006061/E3pW88NS4";
		}
		if(document.getElementById("state").innerHTML==6)
		{
			document.getElementById("state").innerHTML=7;
			alert("嗷呜~~~");
			//window.location.href="http://weibo.com/1759006061/E3pW88NS4";
			context.drawImage(document.getElementById("miao"),0,0);
			document.getElementById("info").innerHTML='<a href="http://yuerpatio.com/">『返回主页』</a><br><a href="">『再玩一次』</a>';
			
		}
	}
	
	//方冰块
	if(location.x>340 && location.x<440 && location.y>480 && location.y<580)
	{
		if(document.getElementById("state").innerHTML==1)
		{
			 document.getElementById("state").innerHTML=2; 
			 context.drawImage(document.getElementById("zyan"),549,167);
			 document.getElementById("info").innerHTML="是否看见本喵主人？<br><br>木有：耳朵<br>有嗒：眼睛<br><br>";
			 return;
		}
		if(document.getElementById("state").innerHTML==3)
		{		 
			 document.getElementById("state").innerHTML=6; 
			 context.drawImage(document.getElementById("zyan"),549,167);
			 document.getElementById("info").innerHTML="神马！哼~ <br><br>抱着一只白喵在拍皂片~ ：眼睛<br>给一只黑白相间的喵拍头像：耳朵<br>和好多的喵在玩耍呢~ ：鱼眼睛<br>";
			 return;
		}
		if(document.getElementById("state").innerHTML==4)
		{
			 document.getElementById("state").innerHTML=5; 
			 context.drawImage(document.getElementById("biyan"),549,167);
			 document.getElementById("info").innerHTML="主人打哪里来？<br><br>有小鱼干的地方：耳朵<br>小抖那里：眼睛<br>木有注意：鱼眼睛<br>";
			 return;
		}
	}
	
	//眼睛
	del=15;
	if(location.x>(580-del) && location.x<(580+del) && location.y>(210-del) && location.y<(210+del))
	{
		if(document.getElementById("state").innerHTML==2)
		{
			 document.getElementById("state").innerHTML=3; 
			 context.drawImage(document.getElementById("biyan"),549,167);
			 document.getElementById("info").innerHTML="本喵主人在干啥呢？<br><br>和其它的喵在玩耍：方冰块<br>吃好吃嗒：耳朵<br>看书：鱼眼睛<br>";
			 return;
		}
		if(document.getElementById("state").innerHTML==5)
		{
			window.location.href="http://weibo.com/1759006061/F0kSb8g9z";
		}
		if(document.getElementById("state").innerHTML==6)
		{
			document.getElementById("state").innerHTML=7;
			alert("喵呜~~~");
			window.location.href="https://weibo.com/1759006061/Db5R7E9te";
		}
	}
	
	//鱼眼睛
	del=15;
	if(location.x>(558-del) && location.x<(558+del) && location.y>(543-del) && location.y<(543+del))
	{
		if(document.getElementById("state").innerHTML==3)
		{
			 window.location.href="http://weibo.com/1759006061/DfolC3tpg"; 
		}
		if(document.getElementById("state").innerHTML==4)
		{
			window.location.href="http://weibo.com/1759006061/F2zXAk5Gw";
		}
		if(document.getElementById("state").innerHTML==5)
		{
			//if(location.y=542)
			//	window.location.href="http://182.61.17.142/home/index.php/cb";
			//else 
				window.location.href="http://weibo.com/1759006061/C27KnmTFA";
		}
		if(document.getElementById("state").innerHTML==6)
		{
			document.getElementById("state").innerHTML=7;
			alert("喵喵喵喵喵~~~~~");
			window.location.href="https://weibo.com/1759006061/EzMyewHV9";
		}
	}
	//context.clearRect(0, 0, canvas.width, canvas.height);
	//drawHorizontalLine(location.y);
	//drawVerticalLine(location.x);
};



</script>
</html>