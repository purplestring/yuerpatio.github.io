<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=0.33,maximum-scale=0.5, user-scalable=no">
    <meta charset="UTF-8">
	<link rel="stylesheet" href="../style.css" type="text/css" />
	<style>
	</style>
	<title>画之册</title>
	<script src="paints.js"></script>

</head>

<body>	
	<div id="main"></div>
</body>
<script>
/*
UPDATE paints SET DYN_ID = '13' WHERE P_DYNASTY = '东晋';
UPDATE paints SET DYN_ID = '18' WHERE P_DYNASTY = '南朝';
UPDATE paints SET DYN_ID = '20' WHERE P_DYNASTY = '隋';
UPDATE paints SET DYN_ID = '21' WHERE P_DYNASTY = '唐';
UPDATE paints SET DYN_ID = '28' WHERE P_DYNASTY = '五代';
UPDATE paints SET DYN_ID = '30' WHERE P_DYNASTY = '北宋';
UPDATE paints SET DYN_ID = '31' WHERE P_DYNASTY = '南宋';
UPDATE paints SET DYN_ID = '35' WHERE P_DYNASTY = '金';
UPDATE paints SET DYN_ID = '40' WHERE P_DYNASTY = '元';

select `P_ID`,`P_NAME`,`P_AUTHOR`,`P_DYNASTY`,`P_TYPE`,`P_INFO`,`P_PICS`,`P_WIDTH`,`P_HEIGHT`,`P_STAR`  from paints ORDER BY DYN_ID,P_AUTHOR,P_YEAR

*/

// UPDATE paints SET P_NAME=SUBSTRING(P_NAME,2,length(P_NAME)/4-1);

	var type = {}; 
	type["star"]=type["shuimo"]=type["shese"]=type["juanzhou"]=type["lizhou"]=
	type["ceye"]=type["juanben"]=type["zhiben"]=type["shufa"]=0;
	var typecolor=["#888","#000","#fff"];
		
	window.onload = function(){		 
		writejson(myjson);
	}
	
	function anti(t)
	{
		//console.log(type);
		if(type[t]==1) type[t]=2;
		else if(type[t]==0) 
		{
			type[t]=1;
			if(t=="shufa") type["shese"]=type["juanzhou"]=type["lizhou"]=type["ceye"]=0;
			if(t=="juanzhou") type["lizhou"]=type["ceye"]=type["shufa"]=0; 
			if(t=="lizhou") type["juanzhou"]=type["ceye"]=type["shufa"]=0; 
			if(t=="ceye") type["juanzhou"]=type["lizhou"]=type["shufa"]=0; 
			if(t=="zhiben") type["juanben"]=0;
			if(t=="juanben") type["zhiben"]=0;
			if(t=="shese") type["shuimo"]=type["shufa"]=0;
			if(t=="shuimo") type["shese"]=type["shufa"]=0;
		}
		else if(type[t]==2) type[t]=0;
		
		writejson(myjson);
	}
	
	function writejson(json)
	{
		var oMain = document.getElementById('main');
		
		var txt='<div id="mt"></div><div id="lm"></div><div id="rm"></div><div id="mb"></div><div id="lt"></div><div id="rt"></div><div id="lb"></div>';	
		txt+='<div id="rb"></div><div id="ltx"></div><div id="rtx"></div><div id="lbx"></div><div id="rbx"></div><br><br>';
		txt+='<div id="title" align="center">画之册</div><br><br>';
		//txt+='<div id="desc1">雨中山果落，灯下草虫鸣<br>地上，水上，丛莽间，凡有见者，皆以志之<br><br></div>';
		//txt+='<div id="desc2">所有图图均嵌有紫月数字水印，<br>转载请注明来源，其他用途请<a href="https://weibo.com/u/5679301959">私信</a></div><br><br><br>';

		txt+='<div id="desc2">';
		txt+='<a href="#" style="color:'+typecolor[type["star"]]+';" onclick="anti('+"'star'"+');return false;">精</a> ';
		txt+='<a href="#" style="color:'+typecolor[type["shuimo"]]+';" onclick="anti('+"'shuimo'"+');return false;">水墨</a> ';
		txt+='<a href="#" style="color:'+typecolor[type["shese"]]+';" onclick="anti('+"'shese'"+');return false;">设色</a> ';
		txt+='<a href="#" style="color:'+typecolor[type["juanzhou"]]+';" onclick="anti('+"'juanzhou'"+');return false;">卷轴</a> ';
		txt+='<a href="#" style="color:'+typecolor[type["lizhou"]]+';" onclick="anti('+"'lizhou'"+');return false;">立轴</a> ';
		txt+='<a href="#" style="color:'+typecolor[type["ceye"]]+';" onclick="anti('+"'ceye'"+');return false;">册页 扇</a> ';
		txt+='<a href="#" style="color:'+typecolor[type["juanben"]]+';" onclick="anti('+"'juanben'"+');return false;">绢本</a> ';
		txt+='<a href="#" style="color:'+typecolor[type["zhiben"]]+';" onclick="anti('+"'zhiben'"+');return false;">纸本</a> ';
		txt+='<a href="#" style="color:'+typecolor[type["shufa"]]+';" onclick="anti('+"'shufa'"+');return false;">书法</a> ';
		txt+='</div><br><br><br>';

		
		lasti=-1;
		for(var i=0;i<json.RECORDS.length;i++)
		{		
			//if(json.RECORDS[i].P_STAR<star) continue;
			if(type["star"]==1 && json.RECORDS[i].P_STAR<5) continue;
			if(type["star"]==2 && json.RECORDS[i].P_STAR==5) continue;
			if(type["shuimo"]==1 && json.RECORDS[i].P_TYPE.indexOf("水墨")<=-1) continue;
			if(type["shuimo"]==2 && json.RECORDS[i].P_TYPE.indexOf("水墨")>-1) continue;			
			if(type["juanzhou"]==1 && json.RECORDS[i].P_TYPE.indexOf("卷轴")<=-1) continue; 
			if(type["juanzhou"]==2 && json.RECORDS[i].P_TYPE.indexOf("卷轴")>-1) continue; 
			if(type["lizhou"]==1 && json.RECORDS[i].P_TYPE.indexOf("立轴")<=-1) continue;
			if(type["lizhou"]==2 && json.RECORDS[i].P_TYPE.indexOf("立轴")>-1) continue;
			if(type["ceye"]==1 && (json.RECORDS[i].P_TYPE.indexOf("册页")<=-1 && json.RECORDS[i].P_TYPE.indexOf("扇")<=-1) ) continue;
			if(type["ceye"]==2 && (json.RECORDS[i].P_TYPE.indexOf("册页")>-1 || json.RECORDS[i].P_TYPE.indexOf("扇")>-1) ) continue;
			if(type["shese"]==1 && json.RECORDS[i].P_TYPE.indexOf("设色")<=-1) continue; 
			if(type["shese"]==2 && json.RECORDS[i].P_TYPE.indexOf("设色")>-1) continue; 
			if(type["juanben"]==1 && json.RECORDS[i].P_TYPE.indexOf("绢本")<=-1) continue; 
			if(type["juanben"]==2 && json.RECORDS[i].P_TYPE.indexOf("绢本")>-1) continue; 
			if(type["zhiben"]==1 && json.RECORDS[i].P_TYPE.indexOf("纸本")<=-1) continue; 
			if(type["zhiben"]==2 && json.RECORDS[i].P_TYPE.indexOf("纸本")>-1) continue; 
			if(type["shufa"]==1 && json.RECORDS[i].P_TYPE.indexOf("书法")<=-1) continue; 
			if(type["shufa"]==2 && json.RECORDS[i].P_TYPE.indexOf("书法")>-1) continue; 
			
			if( (lasti>=0 && json.RECORDS[i].P_DYNASTY!=json.RECORDS[lasti].P_DYNASTY) || lasti==-1) 
			{
				if(lasti>0)txt+="<br><br><br>";
				txt+="<a id='family'>"+json.RECORDS[i].P_DYNASTY+"<br></a>"; 
				//console.log(lasti+json.RECORDS[i].P_DYNASTY);
			}
			if( (lasti>=0 && json.RECORDS[i].P_AUTHOR!=json.RECORDS[lasti].P_AUTHOR) || lasti==-1) 
			{
				//if(i>0)txt+="<br><br><br>";
				txt+="<br>【"+json.RECORDS[i].P_AUTHOR+"】"; 
			}
			if(json.RECORDS[i].P_INFO=="img") txt+="<a href='page.html#"+i+"'>";
			else txt+="<a target='_blank' href='https://baike.baidu.com/item/"+json.RECORDS[i].P_NAME+"'>";
			txt+=json.RECORDS[i].P_NAME+"</a> ";
			
			lasti=i;
		}

		txt+='<br><br><div id="ret"><a href="http://yuerpatio.com/"> ▶返回主页◀</a></div>';
		txt+='<div id="footer">Copyright © 2017~19 鱼儿. All Rights Reserved.</div><br><br>';
		oMain.innerHTML=txt;
	}
</script>
</html>
