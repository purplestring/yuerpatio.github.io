<!doctype html>
<html>
<script>
window.onload = function()
{
	var fan = document.getElementById("fan");
	var page = fan.getElementsByTagName("div");
	var deg = 0;
	
	for(var i = 0, j = page.length, len = j - 1; i < j; i++)
	{
		page[i].index = i;
		page[i].onclick = function()
		{
			var state = fan.dataset.state;
			for(var i = 0; i <= len; i++)
			{
				if(this.index == len)//判断是不是点击的最后一个元素
				{
					if(!state)
					{
						fan.dataset.state = 1;
						deg = i * 10 - Math.ceil(len / 2 * 10);
					}
					else
					{
						//delete fan.dataset.state;
						deg = 0;
					}
				}
				else
				{
					fan.dataset.state = 1;
					if(i < this.index)
					{
						//如果循环的值i < 当前点击元素的索引this.index
						deg = - (this.index - i) * 10;
					}
					else if(i == this.index)
					{
						deg = 0;
					}
					else if(i > this.index)
					{
						deg = (i - this.index) * 10;
					}
				}
				//deg+=5;
				page[i].style.cssText = '-webkit-transform:rotate(' + deg + 'deg); -moz-transform:rotate(' + deg 
				+ 'deg); -o-transform:rotate(' + deg + 'deg); -ms-transform:rotate(' + deg + 'deg); transform:rotate(' + deg + 'deg);';
				if(this.index == len && state!=null)
				{
					page[i].style.cssText +='background-position:70px 0px; ';
					delete fan.dataset.state;
				}
				else
				{
					page[i].style.cssText +='background-position:center top;';
				}
			}
		}
	}
};
</script>

    <head>
        <title>Fan</title>
        <link rel="stylesheet" type="text/css" href="fan.css">
    </head>
    
    <body>
        <div id="content">
            <div id="fan">
                <div></div>
                <div></div>
				<div></div>
                <div></div>
                <div></div>
                <div></div>
				<div></div>
                <div></div>
				<div></div>
                <div></div>
				<div></div>
                <div></div>
				<div></div>
				<div></div>
            </div>
        </div>
    </body>
</html>